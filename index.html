<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onebrief Ambient Motion Prototype</title>
  <link rel="stylesheet" href="./styles/ambient.css">
</head>
<body>
  <header class="site-header">
    <canvas id="ambient-canvas" aria-hidden="true"></canvas>

    <div class="header-content">
      <nav class="header-nav">
        <div class="logo-placeholder">
          <span>ONEBRIEF</span>
        </div>
        <ul class="nav-links">
          <li><a href="#product">Product</a></li>
          <li><a href="#solutions">Solutions</a></li>
          <li><a href="#resources">Resources</a></li>
          <li><a href="#company">Company</a></li>
        </ul>
        <button class="cta-button">Get Started</button>
      </nav>
    </div>

    <button
      id="motion-toggle"
      class="motion-toggle"
      aria-label="Pause animation"
      aria-pressed="false"
    >
      <span aria-hidden="true">⏸</span>
    </button>
  </header>

  <main class="demo-content">
    <section class="hero">
      <h1>Ambient Motion Prototype</h1>
      <p>Procedurally generated contours with interactive particle logo</p>
    </section>

    <section class="controls">
      <h2>Demo Controls</h2>
      <div class="control-grid">
        <div class="control-group">
          <label for="particle-count">Particle Count: <span id="particle-count-value">500</span></label>
          <input type="range" id="particle-count" min="100" max="1000" value="500" step="50">
        </div>
        <div class="control-group">
          <label for="contour-speed">Contour Speed: <span id="contour-speed-value">0.0003</span></label>
          <input type="range" id="contour-speed" min="0" max="0.001" value="0.0003" step="0.0001">
        </div>
        <div class="control-group">
          <label for="spring-strength">Spring Strength: <span id="spring-strength-value">0.02</span></label>
          <input type="range" id="spring-strength" min="0.01" max="0.05" value="0.02" step="0.005">
        </div>
        <div class="control-group">
          <label for="mouse-radius">Mouse Radius: <span id="mouse-radius-value">100</span></label>
          <input type="range" id="mouse-radius" min="50" max="200" value="100" step="10">
        </div>
      </div>
    </section>
  </main>

  <script type="module">
    import { createAmbientHeader } from './src/ambient.js';

    const canvas = document.getElementById('ambient-canvas');

    // Initialize with logo
    const ambient = createAmbientHeader(canvas, {
      logoSvgUrl: './assets/OneBrief.svg',
      particleCount: 500,
      mouseRadius: 100,
      timeSpeed: 0.0003,
      useSamplingDensity: 3,
      alphaThreshold: 128,
    });

    // Wire up controls
    const controls = {
      particleCount: document.getElementById('particle-count'),
      contourSpeed: document.getElementById('contour-speed'),
      springStrength: document.getElementById('spring-strength'),
      mouseRadius: document.getElementById('mouse-radius'),
    };

    const values = {
      particleCount: document.getElementById('particle-count-value'),
      contourSpeed: document.getElementById('contour-speed-value'),
      springStrength: document.getElementById('spring-strength-value'),
      mouseRadius: document.getElementById('mouse-radius-value'),
    };

    // Update handlers
    controls.particleCount.addEventListener('input', (e) => {
      values.particleCount.textContent = e.target.value;
      ambient.updateConfig({ particleCount: parseInt(e.target.value) });
    });

    controls.contourSpeed.addEventListener('input', (e) => {
      values.contourSpeed.textContent = e.target.value;
      ambient.updateConfig({ timeSpeed: parseFloat(e.target.value) });
    });

    controls.springStrength.addEventListener('input', (e) => {
      values.springStrength.textContent = e.target.value;
      ambient.updateConfig({ springStrength: parseFloat(e.target.value) });
    });

    controls.mouseRadius.addEventListener('input', (e) => {
      values.mouseRadius.textContent = e.target.value;
      ambient.updateConfig({ mouseRadius: parseInt(e.target.value) });
    });

    // Motion toggle
    const motionToggle = document.getElementById('motion-toggle');
    motionToggle.addEventListener('click', () => {
      ambient.togglePause();
      const paused = ambient.isPaused;
      motionToggle.setAttribute('aria-pressed', paused);
      motionToggle.setAttribute('aria-label', paused ? 'Play animation' : 'Pause animation');
      motionToggle.querySelector('span').textContent = paused ? '▶' : '⏸';
    });
  </script>
</body>
</html>
